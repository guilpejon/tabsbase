# Kamal secrets file
# 
# In CI (GitHub Actions): variables are set via env: block in workflow
# Locally: run `eval $(op signin)` first, then use the op commands below

# Check if we're in CI (env vars already set) or local (need 1Password)
if [ -z "$KAMAL_REGISTRY_PASSWORD" ]; then
  # Local development - read from 1Password
  KAMAL_REGISTRY_PASSWORD=$(op read "op://Personal/TabsBase/KAMAL_REGISTRY_PASSWORD")
  RAILS_MASTER_KEY=$(op read "op://Personal/TabsBase/RAILS_MASTER_KEY")
  TABSBASE_DATABASE_PASSWORD=$(op read "op://Personal/TabsBase/TABSBASE_DATABASE_PASSWORD")
fi

# PostgreSQL password for the database accessory
POSTGRES_PASSWORD="$TABSBASE_DATABASE_PASSWORD"
