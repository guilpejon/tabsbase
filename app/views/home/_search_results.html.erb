<div class="flex items-baseline justify-between gap-4 mb-3">
  <h2 class="text-lg font-medium">Results</h2>
  <p class="text-sm text-slate-600">
    <%= number_with_delimiter(@pagy.count) %> tabs
    <% if @pagy.pages > 1 %>
      â€¢ Page <%= @pagy.page %> of <%= @pagy.pages %>
    <% end %>
  </p>
</div>

<div class="space-y-6">
  <% if @tabs&.any? %>
    <% @grouped_tabs.each do |artist, artist_tabs| %>
      <div class="bg-white sm:rounded-lg sm:border sm:border-slate-200 overflow-hidden">
        <!-- Artist Header -->
        <div class="px-4 py-3 sm:px-6 sm:py-4 bg-slate-50 border-b border-slate-200">
          <%= link_to artist_path(artist),
              class: "text-lg font-semibold text-slate-900 hover:text-slate-700 hover:underline" do %>
            <%= artist.name %>
          <% end %>
          <span class="text-sm text-slate-500 ml-2">
            (<%= artist_tabs.size %> tab<%= artist_tabs.size == 1 ? '' : 's' %>)
          </span>
        </div>

        <!-- Artist's Songs -->
        <div class="divide-y divide-slate-200">
          <% artist_tabs.each do |tab| %>
            <div class="px-4 py-3 sm:px-6 sm:py-4 hover:bg-slate-50">
              <div class="flex items-center justify-between gap-4">
                <div class="min-w-0 flex-1">
                  <%= link_to tab_path(artist_slug: tab.artist.slug, slug: tab.slug, q: @query, instrument: @instrument, tab_type: @tab_type, version: @version, difficulty: @difficulty),
                      class: "font-medium text-slate-900 hover:text-slate-700 hover:underline block" do %>
                    <%= tab.song.title %>
                  <% end %>
                </div>
                <div class="flex items-center gap-2 text-sm text-slate-500 shrink-0">
                  <span class="px-2 py-1 bg-slate-100 rounded text-xs font-medium">
                    <%= tab.instrument.titleize %>
                  </span>
                  <% if tab.tab_type.present? && tab.tab_type != 'chords' %>
                    <span class="px-2 py-1 bg-slate-100 rounded text-xs font-medium">
                      <%= tab.tab_type_version %>
                    </span>
                  <% end %>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    <% end %>
  <% else %>
    <div class="bg-white sm:rounded-lg sm:border sm:border-slate-200 p-6 text-slate-600">
      No tabs found. Try a different search.
    </div>
  <% end %>
</div>

<% if @pagy.pages > 1 %>
  <div class="mt-6 flex justify-center">
    <%= pagy_tailwind_nav(@pagy) %>
  </div>
<% end %>
