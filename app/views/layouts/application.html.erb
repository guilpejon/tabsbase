<!DOCTYPE html>
<html>
  <head>
    <title><%= content_for(:title) || "Tabsbase" %></title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Tabsbase">
    <meta name="mobile-web-app-capable" content="yes">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <% if Rails.env.production? && ENV["GOOGLE_ANALYTICS_ID"].present? %>
      <!-- Google Analytics -->
      <script async src="https://www.googletagmanager.com/gtag/js?id=<%= ENV["GOOGLE_ANALYTICS_ID"] %>"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', '<%= ENV["GOOGLE_ANALYTICS_ID"] %>');
      </script>
    <% end %>

    <%= yield :head %>

    <%# Enable PWA manifest for installable apps (make sure to enable in config/routes.rb too!) %>
    <%#= tag.link rel: "manifest", href: pwa_manifest_path(format: :json) %>

    <link rel="icon" href="/icon.png" type="image/png">
    <link rel="icon" href="/icon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/icon.png">

    <%# Includes all stylesheet files in app/assets/stylesheets %>
    <%= stylesheet_link_tag :app, "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
  </head>

  <body class="min-h-screen flex flex-col">
    <header class="sticky top-0 z-50 bg-white border-b border-slate-200">
      <nav class="container mx-auto px-4 sm:px-5 h-14 flex items-center justify-between max-w-6xl">
        <%= link_to root_path, class: "flex items-center gap-2 text-slate-900 hover:text-slate-600 transition-colors" do %>
          <span class="text-xl font-semibold tracking-tight">Tabsbase</span>
        <% end %>
      </nav>
    </header>

    <main class="container mx-auto mt-8 sm:mt-12 px-0 sm:px-5 flex flex-col max-w-full overflow-x-hidden flex-1">
      <%= yield %>
    </main>

    <footer class="border-t border-slate-200 bg-white mt-auto">
      <div class="container mx-auto px-4 sm:px-5 py-8 max-w-6xl">
        <!-- Alphabet Navigation -->
        <div class="mb-6">
          <p class="text-sm font-medium text-slate-700 mb-3">Browse Artists</p>
          <div class="flex flex-wrap gap-1.5">
            <%= link_to "#", artists_path(letter: "0-9"),
                class: "w-8 h-8 flex items-center justify-center rounded text-sm font-medium bg-slate-100 text-slate-700 hover:bg-slate-200 transition-colors" %>
            <% ("A".."Z").each do |letter| %>
              <%= link_to letter, artists_path(letter: letter),
                  class: "w-8 h-8 flex items-center justify-center rounded text-sm font-medium bg-slate-100 text-slate-700 hover:bg-slate-200 transition-colors" %>
            <% end %>
          </div>
        </div>

        <div class="flex flex-col sm:flex-row items-center justify-between gap-4 text-sm text-slate-500 pt-4 border-t border-slate-200">
          <p>&copy; <%= Date.current.year %> Tabsbase</p>
          <div class="flex items-center gap-6">
            <%= link_to "Home", root_path, class: "hover:text-slate-900 transition-colors" %>
          </div>
        </div>
      </div>
    </footer>
  </body>
</html>
